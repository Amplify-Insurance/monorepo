{
  "_format": "hh-sol-artifact-1",
  "contractName": "LossDistributor",
  "sourceName": "contracts/utils/LossDistributor.sol",
  "abi": [
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "_riskManager",
          "type": "address"
        },
        {
          "internalType": "address",
          "name": "_underwriterManager",
          "type": "address"
        },
        {
          "internalType": "address",
          "name": "_capitalPool",
          "type": "address"
        }
      ],
      "stateMutability": "nonpayable",
      "type": "constructor"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "owner",
          "type": "address"
        }
      ],
      "name": "OwnableInvalidOwner",
      "type": "error"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "account",
          "type": "address"
        }
      ],
      "name": "OwnableUnauthorizedAccount",
      "type": "error"
    },
    {
      "inputs": [],
      "name": "ZeroAddress",
      "type": "error"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "internalType": "address",
          "name": "newCapitalPool",
          "type": "address"
        }
      ],
      "name": "CapitalPoolSet",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "internalType": "address",
          "name": "previousOwner",
          "type": "address"
        },
        {
          "indexed": true,
          "internalType": "address",
          "name": "newOwner",
          "type": "address"
        }
      ],
      "name": "OwnershipTransferred",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "internalType": "address",
          "name": "newRiskManager",
          "type": "address"
        }
      ],
      "name": "RiskManagerSet",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "internalType": "address",
          "name": "newUnderwriterManager",
          "type": "address"
        }
      ],
      "name": "UnderwriterManagerSet",
      "type": "event"
    },
    {
      "inputs": [],
      "name": "PRECISION_FACTOR",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "capitalPool",
      "outputs": [
        {
          "internalType": "contract ICapitalPool",
          "name": "",
          "type": "address"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "uint256",
          "name": "poolId",
          "type": "uint256"
        },
        {
          "internalType": "uint256",
          "name": "lossAmount",
          "type": "uint256"
        },
        {
          "internalType": "uint256",
          "name": "totalPledgeInPool",
          "type": "uint256"
        }
      ],
      "name": "distributeLoss",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "user",
          "type": "address"
        },
        {
          "internalType": "uint256",
          "name": "poolId",
          "type": "uint256"
        },
        {
          "internalType": "uint256",
          "name": "userPledge",
          "type": "uint256"
        }
      ],
      "name": "getPendingLosses",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "user",
          "type": "address"
        },
        {
          "internalType": "uint256",
          "name": "poolId",
          "type": "uint256"
        },
        {
          "internalType": "uint256",
          "name": "userPledge",
          "type": "uint256"
        }
      ],
      "name": "getProspectiveLosses",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "owner",
      "outputs": [
        {
          "internalType": "address",
          "name": "",
          "type": "address"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "name": "poolLossTrackers",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "accumulatedLossPerPledge",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "user",
          "type": "address"
        },
        {
          "internalType": "uint256",
          "name": "totalLossValue",
          "type": "uint256"
        },
        {
          "internalType": "uint256[]",
          "name": "poolIds",
          "type": "uint256[]"
        }
      ],
      "name": "realizeAggregateLoss",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "user",
          "type": "address"
        },
        {
          "internalType": "uint256",
          "name": "poolId",
          "type": "uint256"
        }
      ],
      "name": "recordPledgeUpdate",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "renounceOwnership",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "riskManager",
      "outputs": [
        {
          "internalType": "address",
          "name": "",
          "type": "address"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "newCapitalPool",
          "type": "address"
        }
      ],
      "name": "setCapitalPool",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "newRiskManager",
          "type": "address"
        }
      ],
      "name": "setRiskManager",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "newUnderwriterManager",
          "type": "address"
        }
      ],
      "name": "setUnderwriterManager",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "newOwner",
          "type": "address"
        }
      ],
      "name": "transferOwnership",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "underwriterManager",
      "outputs": [
        {
          "internalType": "contract IUnderwriterManager",
          "name": "",
          "type": "address"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "",
          "type": "address"
        },
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "name": "userLossStates",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "lossDebt",
          "type": "uint256"
        },
        {
          "internalType": "uint256",
          "name": "accumulatedLossPerPledgeAtLastUpdate",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    }
  ],
  "bytecode": "0x60803461013357601f610ce138819003918201601f19168301916001600160401b0383118484101761013857808492606094604052833981010312610133576100478161014e565b9061006060406100596020840161014e565b920161014e565b331561011a576000549160018060a01b03928360018060a01b031995338784161760005560405192823391167f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e0600080a3169081158015610110575b8015610106575b6100f757509083918560015416176001551683600254161760025516906003541617600355604051610b7e90816101638239f35b63d92e233d60e01b8152600490fd5b50848416156100c3565b50848316156100bc565b604051631e4fbdf760e01b815260006004820152602490fd5b600080fd5b634e487b7160e01b600052604160045260246000fd5b51906001600160a01b03821682036101335756fe6080604081815260048036101561001557600080fd5b600092833560e01c9081630342a907146105f5575080632625339e146105aa578063478426631461058257806353856533146105075780635bfb7508146104df5780635ccea26b1461047257806362ca846014610405578063715018a6146103a95780637c4397261461038d5780638da5cb5b146103675780639c94267914610344578063bcb40c80146102bd578063ccd34cd514610296578063d089eaee14610239578063d852849c14610213578063e7c14c68146101805763f2fde38b146100de57600080fd5b3461017c57602036600319011261017c576100f761061a565b90610100610b04565b6001600160a01b0380921692831561014d5750508254826001600160a01b03198216178455167f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e08380a380f35b908460249251917f1e4fbdf7000000000000000000000000000000000000000000000000000000008352820152fd5b8280fd5b503461017c57602036600319011261017c576001600160a01b036101a261061a565b6101aa610b04565b169182156101ed575050806001600160a01b031960035416176003557f4b661626443182ffd0706ac37de04ee5847d39057837148bbf5d01a5b70bf6ca8280a280f35b517fd92e233d000000000000000000000000000000000000000000000000000000008152fd5b503461017c57602036600319011261017c57602092818392358252845220549051908152f35b50903461017c578060031936011261017c5760019061025661061a565b92602435906001600160a01b0390610273826002541633146107f7565b828752602052828620549416855260056020528185209085526020528320015580f35b5050346102b957816003193601126102b95760209051670de0b6b3a76400008152f35b5080fd5b8382346102b95760603660031901126102b9576102d861061a565b906044359167ffffffffffffffff9182841161034057366023850112156103405783013591821161033c573660248360051b8501011161033c5760246103399361032e6001600160a01b036002541633146107f7565b01906024359061087a565b80f35b8380fd5b8480fd5b5050346102b95760209061036061035a36610635565b91610794565b9051908152f35b5050346102b957816003193601126102b9576001600160a01b0360209254169051908152f35b5050346102b9576020906103606103a336610635565b9161072d565b83346104025780600319360112610402576103c2610b04565b806001600160a01b0381546001600160a01b031981168355167f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e08280a380f35b80fd5b503461017c57602036600319011261017c576001600160a01b0361042761061a565b61042f610b04565b169182156101ed575050806001600160a01b031960015416176001557f95329fb8cf31c0dda21532344c24159acccf2f795f93c87a30ac6d3ddb9d03d68280a280f35b503461017c57602036600319011261017c576001600160a01b0361049461061a565b61049c610b04565b169182156101ed575050806001600160a01b031960025416176002557fda1ab4d9bf3aaf27501818ce6108ebfa2279c6ef7a66e80b0b71555b4182315e8280a280f35b5050346102b957816003193601126102b9576020906001600160a01b03600354169051908152f35b50903461017c57606036600319011261017c576001600160a01b0360015416330361053f575061033990604435906024359035610688565b906020606492519162461bcd60e51b8352820152601360248201527f4c443a204e6f74205269736b4d616e61676572000000000000000000000000006044820152fd5b5050346102b957816003193601126102b9576020906001600160a01b03600154169051908152f35b5050346102b957806003193601126102b95780916001600160a01b036105ce61061a565b16815260056020528181206024358252602052206001815491015482519182526020820152f35b8490346102b957816003193601126102b9576020906001600160a01b03600254168152f35b600435906001600160a01b038216820361063057565b600080fd5b6060906003190112610630576004356001600160a01b038116810361063057906024359060443590565b8181029291811591840414171561067257565b634e487b7160e01b600052601160045260246000fd5b919091821591828015610718575b61071257600091825260046020526040822092670de0b6b3a76400008086029586041417156106fe5780156106ea578254930483018093116106d6575055565b80634e487b7160e01b602492526011600452fd5b602482634e487b7160e01b81526012600452fd5b602482634e487b7160e01b81526011600452fd5b50505050565b508015610696565b9190820391821161067257565b60009180835260046020526001600160a01b0360408420921683526005602052604083209083526020526001604083209154910154918282111561078d57509161078361078992670de0b6b3a764000094610720565b9061065f565b0490565b9250505090565b90916107d9670de0b6b3a76400009160009480865260046020526001600160a01b0360408720951686526005602052604086209086526020526040852093549061065f565b04905490818111156107f2576107ef9250610720565b90565b505090565b156107fe57565b606460405162461bcd60e51b815260206004820152601a60248201527f4c443a204e6f7420556e6465727772697465724d616e616765720000000000006044820152fd5b90601f8019910116810190811067ffffffffffffffff82111761086457604052565b634e487b7160e01b600052604160045260246000fd5b9092916000938015610afd576001600160a01b039283600354169260409384517f731f25c0000000000000000000000000000000000000000000000000000000008152600491878516958684840152608083602481855afa928315610af3578b93610ab1575b508280821091180291828103610a0d575b505050875b87811061090857505050505050505050565b8590600561098482821b86013591828d528c6020958691888352818120938c82528352818120868252835220938c600254168a8d518096819482937ffb7ce3570000000000000000000000000000000000000000000000000000000084528d8401602090939291936001600160a01b0360408201951681520152565b03915afa918215610a03578d926109ca575b5060019450816109aa575b505050016108f6565b670de0b6b3a7640000916109bf91549061065f565b0490553880806109a1565b80925085919394953d83116109fc575b6109e48183610842565b810103126109f85751600193929138610996565b8b80fd5b503d6109da565b8a513d8f823e3d90fd5b813b15610aad5787517f80229f2b0000000000000000000000000000000000000000000000000000000081526001600160a01b0387168582019081529190931860208201528a91839182908490829060400103925af18015610aa357610a75575b80806108f1565b67ffffffffffffffff8199929911610a905785529638610a6e565b60248260418b634e487b7160e01b835252fd5b86513d8b823e3d90fd5b8a80fd5b9092506080813d608011610aeb575b81610acd60809383610842565b81010312610aad578360208201511015610aad5787015191386108e0565b3d9150610ac0565b88513d8d823e3d90fd5b5050505050565b6001600160a01b03600054163303610b1857565b60246040517f118cdaa7000000000000000000000000000000000000000000000000000000008152336004820152fdfea26469706673582212205dcd58b0589f0f530032493fe61801e70d0c9431b543d1331cc4513dd6e1b69764736f6c63430008160033",
  "deployedBytecode": "0x6080604081815260048036101561001557600080fd5b600092833560e01c9081630342a907146105f5575080632625339e146105aa578063478426631461058257806353856533146105075780635bfb7508146104df5780635ccea26b1461047257806362ca846014610405578063715018a6146103a95780637c4397261461038d5780638da5cb5b146103675780639c94267914610344578063bcb40c80146102bd578063ccd34cd514610296578063d089eaee14610239578063d852849c14610213578063e7c14c68146101805763f2fde38b146100de57600080fd5b3461017c57602036600319011261017c576100f761061a565b90610100610b04565b6001600160a01b0380921692831561014d5750508254826001600160a01b03198216178455167f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e08380a380f35b908460249251917f1e4fbdf7000000000000000000000000000000000000000000000000000000008352820152fd5b8280fd5b503461017c57602036600319011261017c576001600160a01b036101a261061a565b6101aa610b04565b169182156101ed575050806001600160a01b031960035416176003557f4b661626443182ffd0706ac37de04ee5847d39057837148bbf5d01a5b70bf6ca8280a280f35b517fd92e233d000000000000000000000000000000000000000000000000000000008152fd5b503461017c57602036600319011261017c57602092818392358252845220549051908152f35b50903461017c578060031936011261017c5760019061025661061a565b92602435906001600160a01b0390610273826002541633146107f7565b828752602052828620549416855260056020528185209085526020528320015580f35b5050346102b957816003193601126102b95760209051670de0b6b3a76400008152f35b5080fd5b8382346102b95760603660031901126102b9576102d861061a565b906044359167ffffffffffffffff9182841161034057366023850112156103405783013591821161033c573660248360051b8501011161033c5760246103399361032e6001600160a01b036002541633146107f7565b01906024359061087a565b80f35b8380fd5b8480fd5b5050346102b95760209061036061035a36610635565b91610794565b9051908152f35b5050346102b957816003193601126102b9576001600160a01b0360209254169051908152f35b5050346102b9576020906103606103a336610635565b9161072d565b83346104025780600319360112610402576103c2610b04565b806001600160a01b0381546001600160a01b031981168355167f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e08280a380f35b80fd5b503461017c57602036600319011261017c576001600160a01b0361042761061a565b61042f610b04565b169182156101ed575050806001600160a01b031960015416176001557f95329fb8cf31c0dda21532344c24159acccf2f795f93c87a30ac6d3ddb9d03d68280a280f35b503461017c57602036600319011261017c576001600160a01b0361049461061a565b61049c610b04565b169182156101ed575050806001600160a01b031960025416176002557fda1ab4d9bf3aaf27501818ce6108ebfa2279c6ef7a66e80b0b71555b4182315e8280a280f35b5050346102b957816003193601126102b9576020906001600160a01b03600354169051908152f35b50903461017c57606036600319011261017c576001600160a01b0360015416330361053f575061033990604435906024359035610688565b906020606492519162461bcd60e51b8352820152601360248201527f4c443a204e6f74205269736b4d616e61676572000000000000000000000000006044820152fd5b5050346102b957816003193601126102b9576020906001600160a01b03600154169051908152f35b5050346102b957806003193601126102b95780916001600160a01b036105ce61061a565b16815260056020528181206024358252602052206001815491015482519182526020820152f35b8490346102b957816003193601126102b9576020906001600160a01b03600254168152f35b600435906001600160a01b038216820361063057565b600080fd5b6060906003190112610630576004356001600160a01b038116810361063057906024359060443590565b8181029291811591840414171561067257565b634e487b7160e01b600052601160045260246000fd5b919091821591828015610718575b61071257600091825260046020526040822092670de0b6b3a76400008086029586041417156106fe5780156106ea578254930483018093116106d6575055565b80634e487b7160e01b602492526011600452fd5b602482634e487b7160e01b81526012600452fd5b602482634e487b7160e01b81526011600452fd5b50505050565b508015610696565b9190820391821161067257565b60009180835260046020526001600160a01b0360408420921683526005602052604083209083526020526001604083209154910154918282111561078d57509161078361078992670de0b6b3a764000094610720565b9061065f565b0490565b9250505090565b90916107d9670de0b6b3a76400009160009480865260046020526001600160a01b0360408720951686526005602052604086209086526020526040852093549061065f565b04905490818111156107f2576107ef9250610720565b90565b505090565b156107fe57565b606460405162461bcd60e51b815260206004820152601a60248201527f4c443a204e6f7420556e6465727772697465724d616e616765720000000000006044820152fd5b90601f8019910116810190811067ffffffffffffffff82111761086457604052565b634e487b7160e01b600052604160045260246000fd5b9092916000938015610afd576001600160a01b039283600354169260409384517f731f25c0000000000000000000000000000000000000000000000000000000008152600491878516958684840152608083602481855afa928315610af3578b93610ab1575b508280821091180291828103610a0d575b505050875b87811061090857505050505050505050565b8590600561098482821b86013591828d528c6020958691888352818120938c82528352818120868252835220938c600254168a8d518096819482937ffb7ce3570000000000000000000000000000000000000000000000000000000084528d8401602090939291936001600160a01b0360408201951681520152565b03915afa918215610a03578d926109ca575b5060019450816109aa575b505050016108f6565b670de0b6b3a7640000916109bf91549061065f565b0490553880806109a1565b80925085919394953d83116109fc575b6109e48183610842565b810103126109f85751600193929138610996565b8b80fd5b503d6109da565b8a513d8f823e3d90fd5b813b15610aad5787517f80229f2b0000000000000000000000000000000000000000000000000000000081526001600160a01b0387168582019081529190931860208201528a91839182908490829060400103925af18015610aa357610a75575b80806108f1565b67ffffffffffffffff8199929911610a905785529638610a6e565b60248260418b634e487b7160e01b835252fd5b86513d8b823e3d90fd5b8a80fd5b9092506080813d608011610aeb575b81610acd60809383610842565b81010312610aad578360208201511015610aad5787015191386108e0565b3d9150610ac0565b88513d8d823e3d90fd5b5050505050565b6001600160a01b03600054163303610b1857565b60246040517f118cdaa7000000000000000000000000000000000000000000000000000000008152336004820152fdfea26469706673582212205dcd58b0589f0f530032493fe61801e70d0c9431b543d1331cc4513dd6e1b69764736f6c63430008160033",
  "linkReferences": {},
  "deployedLinkReferences": {}
}
